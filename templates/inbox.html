<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />

  <!-- ğŸ”’ MOBILE SAFE VIEW -->
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <title>My Personal AI</title>

  <!-- Main Styles -->
  <link rel="stylesheet" href="/static/style.css" />
</head>

<body class="light">

  <!-- ================= LOGIN SCREEN ================= -->
  <div id="loginPage" class="login-page">
    <div class="login-card">
      <h2>Login</h2>

      <div class="field">
        <input type="text" id="loginUsername" placeholder="Username or Email">
      </div>

      <div class="field password-field">
        <input type="password" id="loginPassword" placeholder="Password">
        <span id="togglePassword">ğŸ‘ï¸</span>
      </div>

      <button id="loginBtn">Login</button>
    </div>
  </div>

  <!-- ================= CHATBOT (UNCHANGED) ================= -->
  <div class="container" id="chatApp">

    <!-- ================= SIDEBAR ================= -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h3>Your Chats</h3>
        <button id="newChat" title="New Chat">ï¼‹</button>
      </div>
      <div id="history"></div>
    </aside>

    <!-- ================= CHAT AREA ================= -->
    <main class="chat-area">

      <header class="top">
        <div class="left">
          <span class="mobile-menu" id="mobileMenu">â˜°</span>
          <div class="title">ğŸ¤– My Personal AI</div>
        </div>

        <div class="actions">
          <span id="themeToggle">ğŸŒ</span>
        </div>
      </header>

      <div id="chat" class="chat-messages"></div>

      <div class="input-area">
        <textarea id="input" placeholder="Type your message..." rows="1"></textarea>
        <button id="send">â¤</button>
      </div>

    </main>
  </div>

  <!-- ================= SCRIPT ================= -->
  <script src="/static/script.js"></script>

  <!-- ================= LOGIN LOGIC ================= -->
  <script>
    const loginPage = document.getElementById("loginPage");
    const chatApp = document.getElementById("chatApp");
    const loginBtn = document.getElementById("loginBtn");
    const togglePassword = document.getElementById("togglePassword");
    const passwordInput = document.getElementById("loginPassword");

    // Password show / hide
    togglePassword.addEventListener("click", () => {
      const type = passwordInput.type === "password" ? "text" : "password";
      passwordInput.type = type;
      togglePassword.textContent = type === "password" ? "ğŸ‘ï¸" : "ğŸ™ˆ";
    });

    // Hide chatbot first
    chatApp.style.display = "none";

    // Auto login check
    if (localStorage.getItem("username")) {
      loginPage.style.display = "none";
      chatApp.style.display = "flex";
    }

    // Login button
    loginBtn.addEventListener("click", () => {
      const username = document.getElementById("loginUsername").value.trim();
      if (!username) {
        alert("Please enter username");
        return;
      }
      localStorage.setItem("username", username);
      loginPage.style.display = "none";
      chatApp.style.display = "flex";
    });
  </script>

</body>
</html>
